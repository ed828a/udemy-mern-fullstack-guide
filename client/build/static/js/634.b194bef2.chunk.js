"use strict";(self.webpackChunkproject_one=self.webpackChunkproject_one||[]).push([[634],{2634:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(4165),s=t(5861),c=t(9439),a=t(2791),o=t(7689),l=t(6273),i=t(3696),d=t(9508),u=t(9466),h=t(6517),p=t(4575),m=t(5483),x=t.n(m),f=t(184);x().accessToken="pk.eyJ1IjoiZWQ4MjhhIiwiYSI6ImNrd2lmcmk2ejBuM3gybmw1NnR6NjNzaDQifQ.Z_ydEO2ynIQKGDmRezk3bQ";var j=function(e){var n=(0,a.useRef)(null),t=(0,a.useRef)(null),r=e.center,s=e.zoom,c=r.lat,o=r.lng;return console.log("lat, lng, zoom",c,o,s),(0,a.useEffect)((function(){t.current||(t.current=new(x().Map)({container:n.current,style:"mapbox://styles/mapbox/streets-v11?optimize=true",center:[o,c],zoom:s}),new(x().Marker)({color:"#18fa1f",rotation:45,scale:.7}).setLngLat([o,c]).addTo(t.current))}),[c,o,s]),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"sidebar",children:["Longitude: ",o," | Latitude: ",c," | Zoom: ",s]}),(0,f.jsx)("div",{ref:n,className:"map ".concat(e.className),style:e.style})]})},g=t(3108),v=function(e){var n=(0,a.useState)(!1),t=(0,c.Z)(n,2),m=t[0],x=t[1],v=(0,a.useState)(!1),Z=(0,c.Z)(v,2),k=Z[0],y=Z[1],C=(0,a.useContext)(g.V),w=(0,d.x)(),N=w.isLoading,_=w.error,b=w.sendRequest,D=w.clearError,I=(0,o.s0)(),E=function(){return x(!1)},L=function(){y(!1)},z=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return y(!1),console.log("Deleting..."),n.prev=2,n.next=5,b("".concat("http://localhost:5000/api","/places/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+C.token});case 5:e.onDelete(),I("/".concat(C.userId,"/places"),{push:!0}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{error:_,onClear:D}),(0,f.jsx)(p.Z,{show:m,onCancel:E,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,f.jsx)(h.Z,{style:{marginTop:"1rem"},onClick:E,children:"Close"}),style:{top:"10vh"},children:(0,f.jsx)("div",{className:"map-container",children:(0,f.jsx)(j,{center:e.coordinates,zoom:16})})}),(0,f.jsx)(p.Z,{show:k,onCancel:L,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(h.Z,{inverse:!0,onClick:L,children:"Cancel"}),(0,f.jsx)(h.Z,{danger:!0,onClick:z,children:"Delete"})]}),children:(0,f.jsx)("p",{style:{padding:"1rem"},children:"Do you want to process and delete this place? Please note that it can't be undone thereafter."})}),(0,f.jsx)("li",{className:"place-item",children:(0,f.jsxs)(u.Z,{className:"place-item__content",style:{background:"white"},children:[N&&(0,f.jsx)(i.Z,{asOverlay:!0}),(0,f.jsx)("div",{className:"place-item__image",children:(0,f.jsx)("img",{src:"".concat("http://localhost:5000","/").concat(e.image),alt:e.title})}),(0,f.jsxs)("div",{className:"place-item__info",children:[(0,f.jsx)("h2",{children:e.title}),(0,f.jsx)("h3",{children:e.address}),(0,f.jsx)("p",{children:e.description})]}),(0,f.jsxs)("div",{className:"place-item__actions",children:[(0,f.jsx)(h.Z,{inverse:!0,onClick:function(){return x(!0)},children:"View On Map"}),C.isLoggedIn&&C.userId===e.creatorId&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{to:"/places/".concat(e.id),children:"Edit"}),(0,f.jsx)(h.Z,{danger:!0,onClick:function(){y(!0)},children:"Delete"})]})]})]})})]})},Z=function(e){return console.log("PlaceList props: ",e),0===e.items.length?(0,f.jsx)("div",{className:"place-list center",children:(0,f.jsxs)(u.Z,{style:{background:"white",padding:"1rem"},children:[(0,f.jsx)("h2",{children:"No Places Found. Maybe Create One?"}),(0,f.jsx)(h.Z,{to:"/places/new",children:"Share Place"})]})}):(0,f.jsx)("ul",{className:"place-list",children:e.items.map((function(n){return console.log("place",n),(0,f.jsx)(v,{id:n.id,image:n.image,title:n.title,description:n.description,address:n.address,creatorId:n.creator,coordinates:n.location,onDelete:function(){return e.onDeletePlace(n.id)}},n.id)}))})},k=function(){var e=(0,o.UO)().userId,n=(0,d.x)(),t=n.isLoading,u=n.error,h=n.sendRequest,p=n.clearError,m=(0,a.useState)([]),x=(0,c.Z)(m,2),j=x[0],g=x[1];(0,a.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(t){var s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("".concat("http://localhost:5000/api","/places/user/").concat(e));case 3:s=n.sent,g(s.places),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}();n(e)}),[h,e]);var v=function(e){return g((function(n){return n.filter((function(n){return n.id!==e}))}))},k=/Could not find a place for the provided user id/gm;return console.log(!k.test(u)),(0,f.jsxs)(a.Fragment,{children:[k.test(u)?(0,f.jsx)(Z,{items:j,onDeletePlace:v}):(0,f.jsx)(l.Z,{error:u,onClear:p}),t&&(0,f.jsx)("div",{className:"center",children:(0,f.jsx)(i.Z,{})}),!t&&j.length>0&&(0,f.jsx)(Z,{items:j,onDeletePlace:v}),";"]})}}}]);
//# sourceMappingURL=634.b194bef2.chunk.js.map